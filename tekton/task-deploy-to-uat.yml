apiVersion: tekton.dev/v1beta1
kind: Task
metadata:
  name: deploy-to-uat
spec:
  inputs:
    params:
      - name: APP_NAME
        description: The name of the application
        default: 'infographic'
      - name: NAMESPACE_TEST
        description: The name of the namespace build
        default: 'infographic-test'
      - name: NAMESPACE_UAT
        description: The name of the namespace dev
        default: 'infographic-uat'
  steps:
    - name:
      params:
        - name: SCRIPT
          value: oc $@
        - name: ARGS
          value:
            - tag $(inputs.params.NAMESPACE_TEST)/$(inputs.params.APP_NAME):latest $(inputs.params.NAMESPACE_UAT)/$(inputs.params.APP_NAME):latest
      taskRef:
        kind: ClusterTask
        name: openshift-client

